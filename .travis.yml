language: scala

sudo: false

jdk:
- oraclejdk8

addons:
  apt:
    packages:
    - oracle-java8-installer

env:
  global:
  # PGP Passphrase
  - secure: "rJhsjYUhbDq7AN8txExrN6Zhr40bUAZW87oB58yAzJ409qhi9CwBTVu5RNXz0EN7v4YolrrPrdwHZPdktL+9sx9Zi/WRFxjNiLWEx5oUcwxPujJGwvXXPRWOpxQDOh1YukwcOHYo4CAZnoij1m/2M/byD7UmtIVjvav0OsHlKgnTi2CxIl747dWqvWrEMGsjV6Hr4Y4beqCeZRqgauzQGMQflsjHDddbxO1/z9s9T3sc+bLU3KyKsQp9BXIdbBwFutJYpQQD61s1Ft5vaMtrjYUd5zNMyWShJYpf0wrsE9icWShu8vufLt7O0DQ2Ew9QMiPYUJIlmnzs+ZnkBMsqJ+yTZb+pqndP0A9bkCQSJD9eyw6mxXnz/HcH/T4InYrq2oVHXI9SaCjiyXtGhTYJUQFXsdpc9KefKQ3mNswPx6V9RM7QNPg72RS8VxMJTZAMYifmZrD2CHAY8A9AOaM7/qLHkxq/nAHbttrDZek9WrTAPXRmih8d+CtnHaShFHReTTzAyXxN3OBl+YluAfmaB5UQywzKMh+YVQ1BdaH07A+StamdT8QTyd6uidyNLe+F9lErlufWfA9z7Jbz+I4kkIcFUFe3Ezb+pH7OY4ZlvUa6BPJUZ0GvrYbhhfo152VQRDttXwRDieRttrW/GmbGDc5AsCWJvTT7sYtZ3Pni14E="
  # Github Token
  - secure: "oXMeMQhCVX4Hsk0+XVkffjcf7VP3tbKZYGUvHDRvj8gJB5LAjoLAOnFztdysmNFVX9vpUBBrs2G+hP9LxqWq1W+Y36Hq50JVYRZl+ghN3lTWiWpXzups1FA4FRrojaungv2K4Cbx3eGe2Z2dJ1DrMCNc+vgJydJkPYE+j90xdcq4bvlFxC5IT0XZG1yzTsd+CF0iOy2KSGRPzk8ErywzYQEIwD+joIyQ6Xp3C/D2nNk2ckQzTtdlNiheYaUTvpcEXhSjs8pxwZ6GvVff3AQdSsfwyDyc6NeMsvrMmENBGgDRkuNVb+StY3raVpUveZAtVm49HdrUv2tOtFP2DCo3FjuTSikuySqOl2BO3ZiP974iNWrOo/ooABcplBQrnWD1pLQmSL/178bMdBvPZauoqPCEjLVYxf+qYPMfFu6Zqgxhd3r8Zaplbi9LF/gV51A2AgbIOb1th53oql6Kg4w+QHdTQooVq2aGNyU86qlXgylnfLX5QnPYdzvXs9evKvS70SGOlM1o3FklZ3S4jocGQ8nGnxkBS9NE6/UkLpCxtDaSvyoontfeVUg5oiynpt/02iQqZyUeqM3MymVTA4g4juD3AWjWnHoOe00G+geC57FG1Vv40DQZG+ZsGDuXfy7VUOZ/HfZjgPsjWSQp2YuiuhidXQDIAiDLqd+tbCLdeKk="

script: sbt scripted

before_deploy:
- openssl aes-256-cbc -K $encrypted_4a09436dfeda_key -iv $encrypted_4a09436dfeda_iv -in travis/secring.asc.enc -out travis/secring.asc -d

deploy:
  provider: script
  script: sbt publishSigned githubRelease
  on:
    tags: true
    branch: master
  skip_cleanup: true

before_cache:
- find "$HOME/.ivy2/cache" -name "ivydata-*.properties" -print -delete
- find "$HOME/.sbt"        -name "*.lock"               -print -delete

cache:
  directories:
  - "$HOME/.ivy2/cache"
  - "$HOME/.sbt/boot/"
