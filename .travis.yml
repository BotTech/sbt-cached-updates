language: scala

sudo: false

jdk:
- oraclejdk8

addons:
  apt:
    packages:
    - oracle-java8-installer

env:
  global:
  # PGP Passphrase
  - secure: "ENigMcRwQHF1/tzrAXyGlvWysNyMOEyuuJI7lPZvdsH0BRsLb4Dr2eTXWoJhB1sp7u4qVbRw6owoQyAPbPOMVqN6DeQudRqYD7G6nERl1Izh3sDqUwcBcNmWiZdzQgKTZ64jNPN7gPEsOoYhSDCBIgO79Pj4iam9YljOt5XEQRENbqqoZG3XJO+xoOUcRqYtmYycBP189VSojN628jZzv9o0dDEyz6YuntJA2f9KgXTGXRymWcgb2SjpQaruWkytCqdlYtPzIS5B5Vw85wJR6cdCfko0l4HyfhnBQAAgRck82XWyalW/vFGGqfYZ81cCp7nZypAFObBTEqN0pcbM9sX/RK72h6iTjf2mECO9f80V9C9t4jo4hWpHS/ISGmWB7xIsSQXHuz3d4nVHkO5lZ2RR4IMIcMnSV9pGRtkGdh/WPh00opZMo7mWVTmOuAsMrfmdIv8z8w7g3gPzvc0Gx+OlcsMo9XWD4Ny/3DRWAhXsGdf3m/2ufsrkILm5Dp3UwNuw1un0hXzAlgrFkCMd2hGLWa6xLmkym+X3APaQgogPHda4i+FTAojhR+BSRGaE9k2SYIbGWztY9WUM8857+GNaoUISwXp7N2Lb0RvEmKnyKHi/dz8YLpVKqyyciJY/gUZIJC5kNDdFpIv4n4og7/y77peK+kJ5BkRiDEl19G4="
  # Github Token
  - secure: "oXMeMQhCVX4Hsk0+XVkffjcf7VP3tbKZYGUvHDRvj8gJB5LAjoLAOnFztdysmNFVX9vpUBBrs2G+hP9LxqWq1W+Y36Hq50JVYRZl+ghN3lTWiWpXzups1FA4FRrojaungv2K4Cbx3eGe2Z2dJ1DrMCNc+vgJydJkPYE+j90xdcq4bvlFxC5IT0XZG1yzTsd+CF0iOy2KSGRPzk8ErywzYQEIwD+joIyQ6Xp3C/D2nNk2ckQzTtdlNiheYaUTvpcEXhSjs8pxwZ6GvVff3AQdSsfwyDyc6NeMsvrMmENBGgDRkuNVb+StY3raVpUveZAtVm49HdrUv2tOtFP2DCo3FjuTSikuySqOl2BO3ZiP974iNWrOo/ooABcplBQrnWD1pLQmSL/178bMdBvPZauoqPCEjLVYxf+qYPMfFu6Zqgxhd3r8Zaplbi9LF/gV51A2AgbIOb1th53oql6Kg4w+QHdTQooVq2aGNyU86qlXgylnfLX5QnPYdzvXs9evKvS70SGOlM1o3FklZ3S4jocGQ8nGnxkBS9NE6/UkLpCxtDaSvyoontfeVUg5oiynpt/02iQqZyUeqM3MymVTA4g4juD3AWjWnHoOe00G+geC57FG1Vv40DQZG+ZsGDuXfy7VUOZ/HfZjgPsjWSQp2YuiuhidXQDIAiDLqd+tbCLdeKk="

script: sbt scripted

before_deploy:
- openssl aes-256-cbc -K $encrypted_4a09436dfeda_key -iv $encrypted_4a09436dfeda_iv -in travis/secring.asc.enc -out travis/secring.asc -d

deploy:
  provider: script
  script: sbt publishSigned githubRelease
  on:
    tags: true
    branch: master
  skip_cleanup: true

before_cache:
- find "$HOME/.ivy2/cache" -name "ivydata-*.properties" -print -delete
- find "$HOME/.sbt"        -name "*.lock"               -print -delete

cache:
  directories:
  - "$HOME/.ivy2/cache"
  - "$HOME/.sbt/boot/"
